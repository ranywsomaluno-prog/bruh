-- Carregar Rayfield
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- Criar Janela
local Window = Rayfield:CreateWindow({
    Name = "Interface de Teste",
    LoadingTitle = "Rayfield UI",
    LoadingSubtitle = "Exemplo Toggle + Slider",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "RayfieldExample",
        FileName = "ConfigUI"
    }
})

-- Criar Aba Principal
local MainTab = Window:CreateTab("Controle", 4483362458) -- ícone exemplo
local Section = MainTab:CreateSection("Executar Ação")

-- Localizar o RemoteEvent
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local BeanstalkRESubmitAllPlant = ReplicatedStorage.GameEvents.BeanstalkRESubmitAllPlant

-- Variáveis de controle
local AutoExecutar = false
local Velocidade = 1 -- tempo em segundos

-- Função que dispara o RemoteEvent
local function ExecutarAcao()
    BeanstalkRESubmitAllPlant:FireServer()
    print("RemoteEvent BeanstalkRESubmitAllPlant disparado!")
end

-- Toggle para loop
MainTab:CreateToggle({
    Name = "Executar Repetidamente",
    CurrentValue = false,
    Callback = function(Value)
        AutoExecutar = Value
        print("AutoExecutar:", Value)

        if AutoExecutar then
            task.spawn(function()
                while AutoExecutar do
                    ExecutarAcao() -- Dispara o RemoteEvent
                    task.wait(Velocidade)
                end
            end)
        end
    end,
})

-- Slider para velocidade
MainTab:CreateSlider({
    Name = "Velocidade de Execução",
    Range = {0.1, 5}, -- intervalo mínimo/máximo
    Increment = 0.1,
    Suffix = "s",
    CurrentValue = 1,
    Callback = function(Value)
        Velocidade = Value
        print("Velocidade ajustada para:", Value, "segundos")
    end,
})

-- Botão para execução única (opcional)
MainTab:CreateButton({
    Name = "Executar Agora (Uma vez)",
    Callback = function()
        ExecutarAcao() -- Dispara o RemoteEvent uma vez
    end
})

-- Criar Aba do Player
local PlayerTab = Window:CreateTab("Player", 4483362458) -- ícone exemplo
local PlayerSection = PlayerTab:CreateSection("Modificações do Player")

-- Variável para controle do Infinite Jump
local InfiniteJumpEnabled = false

-- Função para configurar a velocidade do jogador
local function SetPlayerSpeed()
    Rayfield:ShowDialog({
        Title = "Definir Velocidade",
        Content = "Digite o valor da velocidade desejada:",
        Buttons = {
            {
                Name = "Confirmar",
                Callback = function()
                    local speed = tonumber(Dialog:GetInput())
                    if speed and speed > 0 then
                        game.Players.LocalPlayer.Character:WaitForChild("Humanoid").WalkSpeed = speed
                        Rayfield:Notify({
                            Title = "Velocidade Alterada",
                            Content = "Velocidade definida para: " .. speed,
                            Duration = 3,
                            Image = 4483362458,
                        })
                    else
                        Rayfield:Notify({
                            Title = "Erro",
                            Content = "Por favor, digite um número válido maior que 0",
                            Duration = 3,
                            Image = 4483362458,
                        })
                    end
                end,
            },
            {
                Name = "Cancelar",
                Callback = function()
                    -- Não faz nada
                end,
            }
        },
        Input = true
    })
end

-- Função para ativar/desativar Infinite Jump
local function ToggleInfiniteJump()
    InfiniteJumpEnabled = not InfiniteJumpEnabled
    
    if InfiniteJumpEnabled then
        -- Conectar ao evento de pulo
        game:GetService("UserInputService").JumpRequest:Connect(function()
            if InfiniteJumpEnabled then
                game:GetService("Players").LocalPlayer.Character:WaitForChild("Humanoid"):ChangeState("Jumping")
            end
        end)
        
        Rayfield:Notify({
            Title = "Infinite Jump",
            Content = "Ativado - Pressione Espaço para pular infinitamente",
            Duration = 3,
            Image = 4483362458,
        })
    else
        Rayfield:Notify({
            Title = "Infinite Jump",
            Content = "Desativado",
            Duration = 3,
            Image = 4483362458,
        })
    end
end

-- Botão para definir velocidade do jogador
PlayerTab:CreateButton({
    Name = "Definir Velocidade",
    Callback = function()
        SetPlayerSpeed()
    end
})

-- Toggle para Infinite Jump
PlayerTab:CreateToggle({
    Name = "Infinite Jump",
    CurrentValue = false,
    Callback = function(Value)
        InfiniteJumpEnabled = Value
        ToggleInfiniteJump()
    end,
})
